# Copyright (c) 2026 Bob Hablutzel. All rights reserved.
#
# Licensed under a dual-license model: freely available for non-commercial use;
# commercial use requires a separate license. See LICENSE file for details.
# Contact license@gaestalt.com for commercial licensing.

spring:
  main:
    banner-mode: off
  application:
    name: address

server:
  port: 9011

grpc:
  server:
    port: 9010
    reflection-service-enabled: true

management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: always
      probes:
        enabled: true
  health:
    livenessState:
      enabled: true
    readinessState:
      enabled: true
  tracing:
    sampling:
      probability: ${TRACING_SAMPLE_RATE:0.01}
    enabled: ${TRACING_ENABLED:true}

otel:
  exporter:
    otlp:
      endpoint: ${OTEL_EXPORTER_OTLP_ENDPOINT:http://jaeger:4317}
  service:
    name: ${spring.application.name}
  traces:
    exporter: otlp

# USPS configuration
usps:
  base-url: ${USPS_BASE_URL:https://apis-tem.usps.com}
  client-id: ${USPS_CLIENT_ID:}
  client-secret: ${USPS_CLIENT_SECRET:}
  oauth:
    token-path: /oauth2/v3/token
    grant-type: client_credentials

# Smarty configuration
smarty:
  auth-id: ${SMARTY_AUTH_ID:}
  auth-token: ${SMARTY_AUTH_TOKEN:}
  us-street-base-url: ${SMARTY_US_STREET_BASE_URL:https://us-street.api.smarty.com}
  international-base-url: ${SMARTY_INTERNATIONAL_BASE_URL:https://international-street.api.smarty.com}

# Provider routing by country code
address:
  providers:
    routing-configuration:
      840:
        strategy: round_robin
        specification: usps,smarty
      124:
        provider: smarty
      826:
        provider: smarty
  tracing:
    grpc:
      enabled: ${ADDRESS_TRACING_GRPC_ENABLED:true}
